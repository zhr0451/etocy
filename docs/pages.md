# Маршруты и страницы

Каждый файл в `src/pages/` соответствует URL-адресу сайта. Astro автоматически создаёт маршруты на основе структуры папок.

## Основные страницы

- `index.astro` — главная страница: подтягивает первый блок из `company` (минимальный `order`), последнюю опубликованную сессию и трёх персонажей (сначала ведущий, затем сортировка по имени персонажа).
- `company.astro` — описание клуба «К20» и кампании «Последствия Чумы Заклинаний».
- `players.astro` и `players/[slug].astro` — список персонажей (ведущий выводится первым, далее сортировка по имени) и индивидуальные страницы с полным фронтматтером.
- `sessions.astro` и `sessions/[slug].astro` — архив и подробные отчёты; список фильтрует записи по `published: true` и сортирует по номеру сессии по убыванию.
- `diary/lasm.astro` и `diary/[...slug].astro` — раздел дневника Ласм и отдельные записи.

## Динамические маршруты

- Файлы с именами `[slug].astro` или `[...slug].astro` используют `getStaticPaths` для генерации страниц на основе контента.
- При получении коллекции для сессий и других конфиденциальных разделов можно применять фильтр (пример: `({ data }) => data.published` в `sessions/[slug].astro`).
- Возвращайте `props` с данными, чтобы передать запись в компонент и отрендерить Markdown (`const { Content } = await entry.render();`).
- Для вложенных путей (например, `lasm/entry-001`) используйте синтаксис `[...slug]`.

## Добавление новой страницы

1. Создайте файл `.astro` в `src/pages`.
2. Импортируйте `Layout` и нужные коллекции.
3. Добавьте раздел в навигацию, если страница должна отображаться в меню.
4. Оформите стили в блоке `<style>` внизу файла либо создайте компонент.

## Локализация

- Все тексты по умолчанию русскоязычные.
- В ссылках используйте осмысленные подписи. Укороченные формы допустимы только для навигации.
- При необходимости можно добавить атрибут `lang` или `hreflang` для цитат на других языках.
