# Контентные коллекции

Сайт «etocy.info» использует [Astro Content Collections](https://docs.astro.build/ru/guides/content-collections/) для структурирования Markdown-записей. Все файлы находятся в `src/content`.

## Общие правила

- Каждый файл начинается с фронтматтера YAML, описанного в `src/content/config.ts`.
- Используйте пробелы вместо табуляции.
- Даты (`date`, `updated`) указываются в формате ISO `YYYY-MM-DD`.
- В русскоязычных текстах используйте прямые кавычки-ёлочки `« »` и длинное тире `—`, если они уместны.

## company — сведения о кампании

- Папка: `src/content/company/`.
- Поля: `title`, `order`, `updated`, `tags`.
- Файлы отображаются на странице `/company/` в порядке по возрастанию `order`.
- Рекомендуется заводить отдельный файл для описания клуба, кампании, текущих целей и ресурсов.

## players — персонажи и ведущие

- Папка: `src/content/players/`.
- Ключевые поля:  
  - `name` — имя игрока или ведущего (в списках скрывается, если значение `—`);  
  - `character` — имя персонажа;  
  - `role` — либо `player`, либо `dm` (значение по умолчанию `player`, ведущий отображается отдельным бейджем);  
  - `class`, `level` (целое число 0–20), `race`;  
  - `background`, `alignment`, `avatar` — дополнительные поля, отображаются только если заполнены;  
  - `tags` — массив коротких тегов, подсвечивается на карточках и странице персонажа.
- Если информация неизвестна, используйте строку `Неизвестно` или дефис `—`.
- Метаданные автоматически выводятся на страницах `/players/` и `/players/[slug]/`; порядок сортировки сначала показывает ведущего, затем персонажей по имени.
- Тело Markdown можно разбивать на подзаголовки — они корректно отображаются в карточке и в полном описании.

## sessions — отчёты о сессиях

- Папка: `src/content/sessions/`.
- Поля:  
  - `title` — заголовок;  
  - `session` (номер, целое число) — используется для сортировки и отображения;  
  - `date` — дата проведения;  
  - `location` — место встречи (опционально);  
  - `players` — массив имён участников;  
  - `tags` — массив ключевых слов;  
  - `summary` — краткое описание для списков и карточек;  
  - `published` — булев флаг, управляющий видимостью записи на сайте (по умолчанию `true`).
- Текст записи выводится на странице `/sessions/[slug]/`. Допускается использование списков и заголовков Markdown.

## diary — дневник Ласм

- Папка: `src/content/diary/lasm/`.
- Поля: `author`, `title`, `date`, `location`, `mood`, `summary`, `tags`.
- Слаг формируется автоматически по структуре папок; для Ласм используйте подкаталог `lasm`.
- Каждая запись появляется в списке `/diary/lasm/` и имеет отдельную страницу `/diary/lasm/<slug>/`.

## Добавление новых коллекций

1. Опишите схему в `src/content/config.ts`.
2. Создайте папку внутри `src/content`.
3. Добавьте страницы или компоненты, которые будут использовать новую коллекцию.
4. Обновите документацию, если коллекция публичная.
